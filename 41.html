<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Chapitre 7 - La consonne liquide ㄹ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <style>
        :root {
            --font-sm: clamp(0.75rem, 2vmin, 0.875rem);
            --font-base: clamp(0.875rem, 2.5vmin, 1rem);
            --font-lg: clamp(1rem, 3vmin, 1.25rem);
            --font-xl: clamp(1.125rem, 4vmin, 1.5rem);
            --font-title: clamp(1.5rem, 5vmin, 2rem);
            --font-display: clamp(5rem, 20vmin, 8rem);
            --font-char-btn: clamp(4rem, 15vmin, 5rem);
            --font-jamo-key: clamp(1rem, 4vmin, 1.1rem);
            --font-jamo-dropzone: clamp(2rem, 8vmin, 2.25rem);
            --padding-sm: clamp(0.5rem, 2vmin, 0.75rem);
            --padding-md: clamp(0.75rem, 3vmin, 1.5rem);
            --padding-lg: clamp(1rem, 4vmin, 2.5rem);
        }
        html, body {
            width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden;
        }
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
            display: flex; align-items: center; justify-content: center;
            min-height: 100vh; padding: 1rem; background-color: #f3f4f6;
        }

        /* --- Layout --- */
        .course-wrapper { width: 100%; max-width: 600px; }
        .course-container {
            width: 100%; position: relative; aspect-ratio: 1 / 1;
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            border-radius: 0.75rem; overflow: hidden; background-color: white;
        }
        .page {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: space-between;
            opacity: 0; visibility: hidden; transition: opacity 0.4s ease-in-out;
            background-color: white; padding: var(--padding-lg); box-sizing: border-box;
        }
        .page.active { opacity: 1; visibility: visible; }
        .page-content {
            flex-grow: 1; overflow: hidden; display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center;
        }
        
        /* --- Mobile Responsive --- */
        @media (max-width: 600px) {
            body { padding: 0; height: 100vh; max-height: -webkit-fill-available; }
            .course-wrapper { height: 100%; max-width: 100%; }
            .course-container { aspect-ratio: auto; height: 100%; border-radius: 0; }
            .page { padding: 1.5rem 1rem; border-radius: 0; }
        }

        /* --- Common Elements --- */
        .title-text { font-size: var(--font-title); }
        .lesson-text { font-size: var(--font-lg); color: #4b5563; line-height: 1.6; }
        .nav-button { padding: var(--padding-sm) var(--padding-md); border-radius: 0.5rem; font-weight: 600; font-size: var(--font-base); transition: background-color 0.2s; }
        .char-button {
            font-size: var(--font-char-btn); font-weight: 700; font-family: 'Noto Sans KR', sans-serif;
            background-color: #eff6ff; border: 2px solid #93c5fd;
            border-radius: 1rem; padding: var(--padding-sm) var(--padding-md);
            cursor: pointer; transition: background-color 0.2s, transform 0.1s;
            line-height: 1.1;
        }
        .char-button:hover { background-color: #dbeafe; }
        .char-button:active { transform: scale(0.95); }

        /* Combination Page */
        .combination-content .char-button { font-size: clamp(2.5rem, 10vw, 3.5rem); padding: clamp(0.5rem, 2.5vmin, 1rem); }
        .combination-content .symbol-text { font-size: clamp(2rem, 8vw, 3rem); font-weight: 700; color: #9ca3af; }

        /* --- Quiz --- */
        .quiz-question { font-weight: 600; font-size: var(--font-lg); color: #1f2937; margin-bottom: 1rem; }
        .audio-button { background: none; border: none; cursor: pointer; }
        .audio-icon { width: clamp(2.5rem, 8vmin, 3rem); height: clamp(2.5rem, 8vmin, 3rem); color: #6b7280; transition: color 0.2s; }
        .audio-button:hover .audio-icon { color: #1d4ed8; }
        .quiz-option {
            display: inline-block; padding: var(--padding-sm) var(--padding-md);
            border: 2px solid #d1d5db; border-radius: 0.5rem; margin: 0.25rem; cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
            font-family: 'Noto Sans KR', sans-serif; font-size: var(--font-xl); min-width: 60px;
        }
        .quiz-option:hover { background-color: #f3f4f6; }
        .quiz-option.selected { background-color: #e0e7ff; border-color: #a5b4fc; }
        .quiz-option.correct { background-color: #dcfce7 !important; border-color: #4ade80 !important; }
        .quiz-option.incorrect { background-color: #fee2e2 !important; border-color: #f87171 !important; }
        .quiz-option input { display: none; }
        .feedback-area { text-align: right; min-height: 52px; display: flex; gap: 0.5rem; justify-content: flex-end; align-items: center;}
    </style>
</head>
<body>

    <div class="course-wrapper">
        <div class="course-container">
            <!-- Content will be generated by JavaScript -->
        </div>
    </div>

    <script>
        let currentPageId = 'page-0';

        const sounds = {
            'l_initial': { file: 'https://static.wixstatic.com/mp3/699687_d60a4cd5b2b84d98931ea74ce5826dfd.mp3' },
            'l_medial': { file: 'https://static.wixstatic.com/mp3/699687_5da953063cd94af3bf62ca44a51ed38c.mp3' },
            'l_final': { file: 'https://static.wixstatic.com/mp3/699687_96abde93a7d946f3af1108c52060b32f.mp3' },
            'ra': { file: 'https://static.wixstatic.com/mp3/699687_75021b9a01cd489abedb2f6a29c40062.mp3' },
            'da': { file: 'https://static.wixstatic.com/mp3/699687_38e487f77a2f44beb3e9d80d9521e6da.mp3' },
            'ri': { file: 'https://static.wixstatic.com/mp3/699687_90abb44371c64e37954703c25ad3cd78.mp3' },
            'dari': { file: 'https://static.wixstatic.com/mp3/699687_fa926df09a91491e8a13269dac22f363.mp3' },
            'ma': { file: 'https://static.wixstatic.com/mp3/699687_a97f6a1309a9494b8be961e0f5666c56.mp3' },
            'mal': { file: 'https://static.wixstatic.com/mp3/699687_62ae5f30cbf14749806d28bd351ba42f.mp3' },
            'd': { file: 'https://static.wixstatic.com/mp3/699687_87a9f8b74219436d93beb9b795320bc7.mp3' },
            'a': { file: 'https://static.wixstatic.com/mp3/699687_23c826488a4041f488691d65bbecea21.mp3' },
            // Added missing sounds from quizData
            'n': { file: 'https://static.wixstatic.com/mp3/699687_4814975f22564446b6ed84b41c0555ba.mp3' },
            's': { file: 'https://static.wixstatic.com/mp3/699687_88ce9d0e984d41989f3bd6c61cbc7219.mp3' },
            'i': { file: 'https://static.wixstatic.com/mp3/699687_641a5e9958a8416a917cc0c267310c13.mp3' },
            'il': { file: 'https://static.wixstatic.com/mp3/699687_3d08890470294e8081f215fcd5a09c2a.mp3' }, // Assuming '일' sound
            'di': { file: 'https://static.wixstatic.com/mp3/699687_e0f121d5c52c42809f3c7b3c2c1a8470.mp3' }  // Assuming '디' sound
        };
        
        const quizData = [
            { id: 1, page: 9, type: 'mc', sound: 'l_initial', answer: 'ㄹ', options: { 'ㄷ': 'ㄷ', 'ㄹ': 'ㄹ', 'ㄴ': 'ㄴ' } },
            { id: 2, page: 10, type: 'mc', sound: 'l_medial', answer: 'ㄹ', options: { 'ㄹ': 'ㄹ', 'ㄴ': 'ㄴ', 'ㅇ': 'ㅇ' } },
            { id: 3, page: 11, type: 'mc', sound: 'l_final', answer: 'ㄹ', options: { 'ㄴ': 'ㄴ', 'ㅅ': 'ㅅ', 'ㄹ': 'ㄹ' } },
            { id: 4, page: 12, type: 'mc', sound: 'ri', answer: '리', options: { '이': '이', '리': '리', '일': '일', '디': '디' } },
        ];

        function playSound(soundKey) {
            if (!sounds[soundKey]) return;
            Tone.start().then(() => {
                const player = new Tone.Player(sounds[soundKey].file).toDestination();
                player.autostart = true;
                player.onstop = () => player.dispose();
            }).catch(e => console.error("Audio could not start:", e));
        }

        function showPage(pageId) {
            const currentPage = document.getElementById(currentPageId);
            if (currentPage) currentPage.classList.remove('active');
            
            const nextPage = document.getElementById(pageId);
            if (nextPage) {
                nextPage.classList.add('active');
                currentPageId = pageId;
                if (pageId.startsWith('page-')) { 
                    const quizNumMatch = pageId.match(/page-(\d+)/);
                    if (quizNumMatch && quizData.some(q => q.page == quizNumMatch[1])) {
                        resetPageState(pageId);
                    }
                }
            }

            // [ADDED] PostMessage logic
            if (pageId === 'completion-page') {
                if (window.parent) {
                    try {
                        window.parent.postMessage({
                            type: 'lesson_complete'
                        }, '*');
                    } catch (e) {
                        console.error('postMessage failed:', e);
                    }
                }
            }
        }

        function resetPageState(pageId) {
            const pageElement = document.getElementById(pageId);
            if (!pageElement) return;

            const quizNav = pageElement.querySelector('[id$="-nav"]');
            if (quizNav && quizNav.dataset.initialHtml) {
                quizNav.innerHTML = quizNav.dataset.initialHtml;
                const quizDataEntry = quizData.find(q => `page-${q.page}` === pageId);
                if (quizDataEntry) {
                    const quizNum = quizDataEntry.id;
                    const newCheckButton = quizNav.querySelector('button[onclick^="check"]');
                    if (newCheckButton) {
                        newCheckButton.onclick = () => checkAnswer(quizNum);
                    }
                }
            }
            
            const options = pageElement.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
                const radio = opt.querySelector('input');
                if (radio) { radio.checked = false; radio.disabled = false; }
            });
        }

        function checkAnswer(quizNum) {
            const data = quizData.find(q => q.id === quizNum);
            const selectedOption = document.querySelector(`input[name="q${quizNum}"]:checked`);
            const navEl = document.getElementById(`quiz-${quizNum}-nav`);
            const feedbackContainer = navEl.querySelector(`#quiz-${quizNum}-feedback`);
            
            if (!selectedOption) {
                // [MODIFIED] Set font-size for feedback text
                feedbackContainer.innerHTML = `<p class="text-yellow-600 font-bold" style="font-size: var(--font-base);">Veuillez sélectionner une réponse.</p>`;
                setTimeout(() => { if(feedbackContainer) feedbackContainer.innerHTML = ''; }, 2000);
                return;
            }
            
            navEl.querySelector('button[onclick^="check"]').style.display = 'none';
            document.querySelectorAll(`input[name="q${quizNum}"]`).forEach(opt => {
                opt.disabled = true;
                opt.parentElement.style.cursor = 'default';
            });
            
            const isCorrect = selectedOption.value === data.answer;
            selectedOption.parentElement.classList.add(isCorrect ? 'correct' : 'incorrect');
            
            // [MODIFIED] More robust way to check for the last quiz
            const isLastQuiz = data.id === quizData[quizData.length - 1].id;
            const nextPageId = isLastQuiz ? 'completion-page' : `page-${data.page + 1}`;
            const buttonText = isLastQuiz ? 'Terminer' : 'Suivant &rarr;';

            if (isCorrect) {
                feedbackContainer.innerHTML = `<button onclick="showPage('${nextPageId}')" class="nav-button bg-green-600 text-white hover:bg-green-700">${buttonText}</button>`;
            } else {
                feedbackContainer.innerHTML = `<button onclick="resetQuiz(${quizNum})" class="nav-button bg-red-600 text-white hover:bg-red-700">Réessayer</button>`;
            }
        }
        
        function resetQuiz(quizNum) {
            const pageId = `page-${quizData.find(q => q.id === quizNum).page}`;
            resetPageState(pageId);
        }

        function createPages() {
            const container = document.querySelector('.course-container');
            // [MODIFIED] Removed leading-tight from h1
            let pagesHtml = `
                <div id="page-0" class="page active"> <div class="page-content text-center"> <h1 class="title-text font-bold text-gray-800">Chapitre 7<br>La consonne liquide ㄹ</h1> <button onclick="showPage('page-1')" class="nav-button bg-blue-600 text-white hover:bg-blue-700 mt-8">Commencer</button> </div> <div></div> </div>
                <div id="page-1" class="page"> <div class="page-content"> <div class="flex justify-center gap-2 sm:gap-4"> <button class="char-button" style="font-size: clamp(2.5rem, 10vw, 4rem);" onclick="playSound('l_initial')">ㄹ</button> <button class="char-button" style="font-size: clamp(2.5rem, 10vw, 4rem);" onclick="playSound('l_medial')">ㄹ</button> <button class="char-button" style="font-size: clamp(2.5rem, 10vw, 4rem);" onclick="playSound('l_final')">ㄹ</button> </div> <p class="lesson-text mt-8">&lt;ᄅ&gt; (리을 li-eul) peut se prononcer de trois façons <strong class="font-semibold text-blue-600">selon sa position</strong>: consonne spirante latérale alvéolaire, consonne battue alvéolaire, ou consonne spirante latérale rétroflexe.</p> </div> <div class="flex justify-between items-center"> <button onclick="showPage('page-0')" class="nav-button text-gray-600 hover:bg-gray-200">&larr; Titre</button> <button onclick="showPage('page-2')" class="nav-button bg-blue-600 text-white hover:bg-blue-700">Suivant &rarr;</button> </div> </div>
                <div id="page-2" class="page"> <div class="page-content items-center"> <p class="lesson-text text-center leading-relaxed">Cela n’est pas nécessaire de mémoriser tous les termes phonétiques, et dans la plupart des cas, cela n’empêche pas de comprendre même si vous prononcez les trois sons de la même manière. Pourtant, les natifs distinguent les trois sons assez clairement.</p> </div> <div class="flex justify-between items-center"> <button onclick="showPage('page-1')" class="nav-button text-gray-600 hover:bg-gray-200">&larr; Précédent</button> <button onclick="showPage('page-3')" class="nav-button bg-blue-600 text-white hover:bg-blue-700">Suivant &rarr;</button> </div> </div>
                <div id="page-3" class="page"> <div class="page-content"> <div class="flex justify-center items-center gap-8"> <button class="char-button" onclick="playSound('l_initial')">ㄹ</button> <img src="https://static.wixstatic.com/media/699687_51c365c22da8496e8722f3d58a294399~mv2.jpg" alt="Prononciation de ㄹ initial" style="width: clamp(120px, 30vw, 160px); height: auto; border-radius: 0.75rem;"> </div> <p class="lesson-text mt-6 leading-relaxed">Quand il est en première position, on le prononce en touchant et détachant la langue à la gencive. Dans ce cas, Il se transcrit par /l/ dans l’alphabet phonétique et correspond à &lt;L&gt; en français comme &lt;Lin&gt;. <strong class="font-semibold text-blue-600">C’est sa prononciation représentative, mais il est très rare de voir un mot qui commence par &lt;ㄹ&gt; en langue moderne. Il est plutôt utilisé pour transcrire des mots d’origines étrangers ou des noms particuliers.</strong></p> </div> <div class="flex justify-between items-center"> <button onclick="showPage('page-2')" class="nav-button text-gray-600 hover:bg-gray-200">&larr; Précédent</button> <button onclick="showPage('page-4')" class="nav-button bg-blue-600 text-white hover:bg-blue-700">Suivant &rarr;</button> </div> </div>
                <div id="page-4" class="page"> <div class="page-content combination-content"> <div class="flex flex-row flex-wrap justify-center items-center gap-x-4 gap-y-2"> <div class="flex flex-row items-center gap-x-4"> <button class="char-button" style="color: #3b82f6;" onclick="playSound('l_initial')">ㄹ</button> <div class="symbol-text">+</div> <button class="char-button" style="color: #ef4444;" onclick="playSound('a')">ㅏ</button> </div> <div class="flex flex-row items-center gap-x-2"> <div class="symbol-text">=</div> <button class="char-button" style="color: #1f2937;" onclick="playSound('ra')">라</button> </div> </div> </div> <div class="flex justify-between items-center"> <button onclick="showPage('page-3')" class="nav-button text-gray-600 hover:bg-gray-200">&larr; Précédent</button> <button onclick="showPage('page-5')" class="nav-button bg-blue-600 text-white hover:bg-blue-700">Suivant &rarr;</button> </div> </div>
                <div id="page-5" class="page"> <div class="page-content"> <div class="flex justify-center items-center gap-8"> <button class="char-button" onclick="playSound('l_medial')">ㄹ</button> <img src="https://static.wixstatic.com/media/699687_48d70b9e036e494d9563c3de049ab8c1~mv2.jpg" alt="Prononciation de ㄹ medial" style="width: clamp(120px, 30vw, 160px); height: auto; border-radius: 0.75rem;"> </div> <p class="lesson-text mt-6 leading-relaxed">Le &lt;ᄅ&gt; entre les deux voyelles se prononce comme un son battu /ɾ/, qui signifie que la langue tape légèrement le palais. Il est similaire au son &lt;R&gt; en espagnol ou &lt;T&gt; américain dans &lt;Water&gt; ou &lt;Butter&gt;. Cet effet a lieu pour but de lier plus facilement les voyelles sans pousser la gencive.</p> </div> <div class="flex justify-between items-center"> <button onclick="showPage('page-4')" class="nav-button text-gray-600 hover:bg-gray-200">&larr; Précédent</button> <button onclick="showPage('page-6')" class="nav-button bg-blue-600 text-white hover:bg-blue-700">Suivant &rarr;</button> </div> </div>
                <div id="page-6" class="page"> <div class="page-content combination-content"> <div class="flex flex-row flex-wrap justify-center items-center gap-x-4 gap-y-2"> <div class="flex flex-row items-center gap-x-4"> <button class="char-button" style="color: #1f2937;" onclick="playSound('da')">다</button> <div class="symbol-text">+</div> <button class="char-button" style="color: #1f2937;" onclick="playSound('ri')">리</button> </div> <div class="flex flex-row items-center gap-x-2"> <div class="symbol-text">=</div> <button class="char-button" style="color: #1f2937;" onclick="playSound('dari')">다리</button> </div> </div> </div> <div class="flex justify-between items-center"> <button onclick="showPage('page-5')" class="nav-button text-gray-600 hover:bg-gray-200">&larr; Précédent</button> <button onclick="showPage('page-7')" class="nav-button bg-blue-600 text-white hover:bg-blue-700">Suivant &rarr;</button> </div> </div>
                <div id="page-7" class="page"> <div class="page-content"> <div class="flex justify-center items-center gap-8"> <button class="char-button" onclick="playSound('l_final')">ㄹ</button> <img src="https://static.wixstatic.com/media/699687_420c33f1328342fbb9e75696779fd698~mv2.jpg" alt="Prononciation de ㄹ final" style="width: clamp(120px, 30vw, 160px); height: auto; border-radius: 0.75rem;"> </div> <p class="lesson-text mt-6 leading-relaxed">En position finale, il se réalise comme une consonne rétroflexe, ce qui veut dire que l’on roule le bout de la langue pour pousser fortement le palais (en comparaison avec la première position). Comme il est en dernière position, on ne détache pas la langue mais on s’arrête à la position touchée.</p> </div> <div class="flex justify-between items-center"> <button onclick="showPage('page-6')" class="nav-button text-gray-600 hover:bg-gray-200">&larr; Précédent</button> <button onclick="showPage('page-8')" class="nav-button bg-blue-600 text-white hover:bg-blue-700">Suivant &rarr;</button> </div> </div>
                <div id="page-8" class="page"> <div class="page-content combination-content"> <div class="flex flex-row flex-wrap justify-center items-center gap-x-4 gap-y-2"> <div class="flex flex-col items-center gap-y-2"> <button class="char-button" style="color: #1f2937;" onclick="playSound('ma')">마</button> <div class="symbol-text">+</div> <button class="char-button" style="color: #3b82f6;" onclick="playSound('l_final')">ㄹ</button> </div> <div class="flex flex-row items-center gap-x-2"> <div class="symbol-text">=</div> <button class="char-button" style="color: #1f2937;" onclick="playSound('mal')">말</button> </div> </div> </div> <div class="flex justify-between items-center"> <button onclick="showPage('page-7')" class="nav-button text-gray-600 hover:bg-gray-200">&larr; Précédent</button> <button onclick="showPage('page-9')" class="nav-button bg-blue-600 text-white hover:bg-blue-700">Faire le quiz &rarr;</button> </div> </div>
            `;
            
            quizData.forEach((data) => {
                const { id: quizNum, page, type, sound, options } = data;
                let contentHtml = `
                    <p class="quiz-question mb-4">Écoutez et choisissez la bonne écriture.</p>
                    <button class="audio-button" onclick="playSound('${sound}')"><svg class="audio-icon mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" /></svg></button>
                    <div id="quiz-${quizNum}-options" class="flex flex-wrap gap-2 justify-center">
                        ${Object.entries(options).map(([value, text]) => `<label class="quiz-option"><input type="radio" name="q${quizNum}" value="${text}">${text}</label>`).join('')}
                    </div>
                `;

                const prevButtonHtml = page === 9 ? `<button onclick="showPage('page-8')" class="nav-button text-gray-600 hover:bg-gray-200">&larr; Leçon</button>` : `<button onclick="showPage('page-${page - 1}')" class="nav-button text-gray-600 hover:bg-gray-200">&larr; Précédent</button>`;
                const navButtonHtml = `
                    <div id="quiz-${quizNum}-nav" class="flex justify-between items-center w-full">
                        ${prevButtonHtml}
                        <div class="flex items-center gap-4">
                           <div id="quiz-${quizNum}-feedback" class="feedback-area"></div>
                           <button onclick="checkAnswer(${quizNum})" class="nav-button bg-blue-600 text-white hover:bg-blue-700">Valider</button>
                        </div>
                    </div>`;

                pagesHtml += `
                    <div id="page-${page}" class="page">
                        <div class="page-content">${contentHtml}</div>
                        ${navButtonHtml}
                    </div>
                `;
            });

            const completionPageHtml = `<div id="completion-page" class="page"> <div class="page-content"> <svg class="w-20 h-20 mx-auto mb-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <h2 class="title-text font-bold text-gray-800 mb-3">Chapitre terminé !</h2> <p class="lesson-text text-gray-600">Félicitations, vous avez terminé le chapitre.</p> </div> <div class="w-full text-center pb-4"> <button onclick="showPage('page-0')" class="nav-button bg-blue-600 text-white hover:bg-blue-700">Recommencer</button> </div> </div>`;
            container.innerHTML = pagesHtml + completionPageHtml;
        }

        function initializeApp() {
            createPages();
            
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', (e) => {
                    document.querySelectorAll(`input[name="${e.target.name}"]`).forEach(opt => opt.parentElement.classList.remove('selected'));
                    if(e.target.checked) e.target.parentElement.classList.add('selected');
                });
            });

            document.querySelectorAll('[id$="-nav"]').forEach(nav => {
                nav.dataset.initialHtml = nav.innerHTML;
            });
            
            showPage('page-0');
        }
        
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>

